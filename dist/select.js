define("#select/0.8.0/select",["#popup/0.9.5/dropdown","#popup/0.9.5/popup","#jquery/1.7.2/jquery","#overlay/0.9.7/overlay","#position/0.9.2/position","#iframe-shim/0.9.2/iframe-shim","#widget/0.9.16/widget","#base/0.9.16/base","#class/0.9.2/class","#events/0.9.1/events","#base/0.9.16/aspect","#base/0.9.16/attribute","#widget/0.9.16/daparser","#widget/0.9.16/auto-render","#widget/0.9.16/templatable","#widget/0.9.16/ast-printer","#handlebars/1.0.0/handlebars"],function(require,exports,module){function convertSelect(select,prefix){var i,model=[],options=select.options,l=options.length,hasDefaultSelect=!1;for(i=0;i<l;i++){var j,o={},option=options[i],fields=["text","value","defaultSelected","selected"];for(j in fields){var field=fields[j];o[field]=option[field]}o.defaultSelected=option.defaultSelected?"true":"false",option.selected?(o.selected="true",hasDefaultSelect=!0):o.selected="false",model.push(o)}return hasDefaultSelect||(newModel[0].selected="true"),{select:model,prefix:prefix}}function completeModel(model,prefix){var i,j,newModel=[],selectIndexArray=[];for(i in model){var o=model[i];o.defaultSelected=o.defaultSelected?"true":"false",o.selected?(o.selected=o.defaultSelected="true",selectIndexArray.push(i)):o.selected=o.defaultSelected="false",newModel.push(o)}if(selectIndexArray.length>0){selectIndexArray.pop();for(j in selectIndexArray)newModel[0].selected="false"}else newModel[0].selected="true";return{select:newModel,prefix:prefix}}function getSelectedIndex(option,options){var index;return $.isNumeric(option)?index=option:typeof option=="string"?index=options.index(options.parent().find(option)):index=options.index(option),index}var Dropdown=require("#popup/0.9.5/dropdown"),$=require("#jquery/1.7.2/jquery"),Templatable=require("#widget/0.9.16/templatable"),Select=Dropdown.extend({Implements:Templatable,attrs:{prefix:"ui-select",template:'<div class="{{prefix}}"><ul class="{{prefix}}-content" data-role="content">{{#each select}}<li data-role="item" class="{{../prefix}}-item" data-value="{{value}}" data-defaultSelected="{{defaultSelected}}" data-selected="{{selected}}">{{text}}</li>{{/each}}</ul></div>',value:"",length:0,selectedIndex:-1,multiple:!1,disabled:!1,selectSource:null},events:{"click [data-role=item]":function(e){var target=$(e.currentTarget);this.select(target)},"mouseenter [data-role=item]":function(e){$(e.currentTarget).addClass(this.get("prefix")+"-hover")},"mouseleave [data-role=item]":function(e){$(e.currentTarget).removeClass(this.get("prefix")+"-hover")}},initAttrs:function(config,dataAttrsConfig){Select.superclass.initAttrs.call(this,config,dataAttrsConfig);var select=this.get("trigger");if(select[0].tagName.toLowerCase()=="select"){this.set("selectSource",select);var triggerTemplate='<a href="#" class="'+this.get("prefix")+'-trigger"></a>',newTrigger=$(triggerTemplate);this.set("trigger",newTrigger),select.after(newTrigger).hide(),this.model=convertSelect(select[0],this.get("prefix"))}else this.model=completeModel(this.model,this.get("prefix"))},setup:function(){var that=this;this.get("trigger").on("click",function(e){e.preventDefault(),that.get("disabled")||that.show()});var options=this.options=this.$("[data-role=content]").children();this.select("[data-selected=true]"),this.set("length",options.length),this._tweakAlignDefaultValue(),this._setupShim()},destroy:function(){this.element.remove();var select=this.get("selectSource");select&&(this.get("trigger").remove(),select.show())},select:function(option){var selectIndex=getSelectedIndex(option,this.options);return this.set("selectedIndex",selectIndex),this.hide(),this},syncModel:function(model){this.model=completeModel(model,this.get("prefix")),this.renderPartial("[data-role=content]"),this.set("selectedIndex",-1),this.set("value","");var options=this.options=this.$("[data-role=content]").children();return this.set("length",options.length),this.select("[data-selected=true]"),this},getOption:function(){},addOption:function(item){return this},removeOption:function(item){return this},_onRenderSelectedIndex:function(index){if(index==-1)return;var selector=this.options.eq(index);this.currentItem&&this.currentItem.attr("data-selected","false").removeClass(this.get("prefix")+"-selected"),selector.attr("data-selected","true").addClass(this.get("prefix")+"-selected"),this.set("value",selector.attr("data-value")),this.get("trigger").html(selector.html()),this.currentItem=selector,this.trigger("change",selector)},_onRenderDisabled:function(val){var className=this.get("prefix")+"-disabled",trigger=this.get("trigger");trigger[val?"addClass":"removeClass"](className)}});module.exports=Select});